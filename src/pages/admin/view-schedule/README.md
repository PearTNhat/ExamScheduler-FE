# HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Trang Xem Lá»‹ch Thi

## Tá»•ng quan

Há»‡ thá»‘ng cung cáº¥p 2 trang Ä‘á»ƒ xem lá»‹ch thi:

1. **ViewSchedule** (`/admin/view-schedule`) - Xem danh sÃ¡ch ká»³ thi dáº¡ng báº£ng/lá»‹ch
2. **ViewExamTimetable** (`/admin/exam-timetable`) - Xem lá»‹ch thi theo thá»i gian biá»ƒu chi tiáº¿t

## 1. Trang ViewSchedule (Gá»‘c)

### URL
```
/admin/view-schedule
```

### TÃ­nh nÄƒng
- âœ… Xem danh sÃ¡ch ká»³ thi dáº¡ng báº£ng hoáº·c lá»‹ch (calendar)
- âœ… TÃ¬m kiáº¿m vÃ  lá»c theo Ä‘á»£t thi
- âœ… ThÃªm/Sá»­a/XÃ³a ká»³ thi
- âœ… Xem chi tiáº¿t ká»³ thi (cÃ³ danh sÃ¡ch sinh viÃªn vÃ  giÃ¡m thá»‹)
- âœ… Thá»‘ng kÃª sá»‘ lÆ°á»£ng ká»³ thi

### CÃ¡ch sá»­ dá»¥ng
1. Chá»n cháº¿ Ä‘á»™ xem: Danh sÃ¡ch hoáº·c Lá»‹ch
2. Sá»­ dá»¥ng bá»™ lá»c Ä‘á»ƒ tÃ¬m kiáº¿m
3. Click vÃ o má»™t ká»³ thi Ä‘á»ƒ xem chi tiáº¿t
4. Modal chi tiáº¿t sáº½ hiá»ƒn thá»‹:
   - ThÃ´ng tin ca thi
   - Danh sÃ¡ch sinh viÃªn (Tab 1)
   - Danh sÃ¡ch giÃ¡m thá»‹ (Tab 2)

## 2. Trang ViewExamTimetable (Má»›i)

### URL
```
/admin/exam-timetable
```

### TÃ­nh nÄƒng
- âœ… Hiá»ƒn thá»‹ lá»‹ch thi theo Ä‘á»‹nh dáº¡ng thá»i gian biá»ƒu
- âœ… NhÃ³m theo ngÃ y, chia buá»•i sÃ¡ng/chiá»u
- âœ… Lá»c theo khoáº£ng thá»i gian (tá»« ngÃ y - Ä‘áº¿n ngÃ y)
- âœ… Lá»c theo Ä‘á»£t thi
- âœ… Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin: mÃ´n há»c, phÃ²ng thi, giÃ¡m thá»‹, sá»‘ SV
- âœ… Click vÃ o ká»³ thi Ä‘á»ƒ xem chi tiáº¿t sinh viÃªn vÃ  giÃ¡m thá»‹
- âœ… Thá»‘ng kÃª tá»•ng sá»‘: ká»³ thi, ngÃ y thi, sinh viÃªn

### CÃ¡ch sá»­ dá»¥ng

#### BÆ°á»›c 1: Lá»c dá»¯ liá»‡u
```
1. Chá»n "Tá»« ngÃ y" vÃ  "Äáº¿n ngÃ y" (hoáº·c Ä‘á»ƒ trá»‘ng Ä‘á»ƒ xem táº¥t cáº£)
2. Chá»n "Äá»£t thi" (hoáº·c chá»n "Táº¥t cáº£")
3. Click "Ãp dá»¥ng" Ä‘á»ƒ lá»c
4. Click "Äáº·t láº¡i" Ä‘á»ƒ xÃ³a bá»™ lá»c
```

#### BÆ°á»›c 2: Xem lá»‹ch thi
- Lá»‹ch thi Ä‘Æ°á»£c nhÃ³m theo tá»«ng ngÃ y
- Má»—i ngÃ y hiá»ƒn thá»‹ 2 buá»•i:
  - ğŸŸ¡ **Buá»•i sÃ¡ng**: CÃ¡c ká»³ thi trÆ°á»›c 12:00
  - ğŸŸ  **Buá»•i chiá»u**: CÃ¡c ká»³ thi tá»« 12:00 trá»Ÿ Ä‘i

#### BÆ°á»›c 3: Xem chi tiáº¿t
- Click nÃºt "Chi tiáº¿t" trÃªn báº¥t ká»³ ká»³ thi nÃ o
- Modal sáº½ hiá»ƒn thá»‹:
  - **ThÃ´ng tin ca thi**: NgÃ y, giá», thá»i lÆ°á»£ng, tráº¡ng thÃ¡i
  - **ThÃ´ng tin mÃ´n há»c**: MÃ£ nhÃ³m, tÃªn mÃ´n, phÃ²ng thi
  - **Tab Sinh viÃªn**: Danh sÃ¡ch Ä‘áº§y Ä‘á»§ sinh viÃªn tham dá»±
  - **Tab GiÃ¡m thá»‹**: Danh sÃ¡ch giÃ¡m thá»‹ vÃ  vai trÃ²

## 3. Modal Chi Tiáº¿t Ká»³ Thi

### Cáº¥u trÃºc

#### A. ThÃ´ng tin cÆ¡ báº£n
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThÃ´ng tin ca thi    â”‚ ThÃ´ng tin mÃ´n â”‚
â”‚ - NgÃ y thi          â”‚ - MÃ£ nhÃ³m thi â”‚
â”‚ - Ca thi            â”‚ - Há»c pháº§n    â”‚
â”‚ - Thá»i lÆ°á»£ng        â”‚ - MÃ£ HP       â”‚
â”‚ - Tráº¡ng thÃ¡i        â”‚ - PhÃ²ng thi   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### B. Tab Sinh viÃªn
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Danh sÃ¡ch sinh viÃªn          [Xuáº¥t danh sÃ¡ch]   â”‚
â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ STT â”‚ MÃ£ SV    â”‚ Há» vÃ  tÃªn    â”‚ Lá»›p   â”‚ Email      â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1  â”‚ B21DCCN  â”‚ Nguyá»…n VÄƒn A â”‚ K66A  â”‚ email@... â”‚
â”‚  2  â”‚ B21DCCN  â”‚ Tráº§n Thá»‹ B   â”‚ K66A  â”‚ email@... â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### C. Tab GiÃ¡m thá»‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨â€ğŸ« Danh sÃ¡ch giÃ¡m thá»‹          [Xuáº¥t danh sÃ¡ch]   â”‚
â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ STT â”‚ MÃ£ GV    â”‚ Há» vÃ  tÃªn    â”‚ Vai trÃ²  â”‚ Email   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1  â”‚ GV001    â”‚ Nguyá»…n VÄƒn C â”‚Supervisorâ”‚email@...â”‚
â”‚  2  â”‚ GV002    â”‚ Tráº§n Thá»‹ D   â”‚Assistant â”‚email@...â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. API Ä‘Æ°á»£c sá»­ dá»¥ng

### Timetable API
```javascript
GET /api/exams/timetable/view
Params:
  - startDate: string (YYYY-MM-DD)
  - endDate: string (YYYY-MM-DD)
  - examSessionId: number

Response:
{
  timetable: [
    {
      day: "Thá»© Hai",
      date: "2025-01-15",
      morning: [...],
      afternoon: [...]
    }
  ],
  totalExams: 100
}
```

### Detail API
```javascript
GET /api/exams/:id/detail

Response:
{
  id: 1,
  examDate: "2025-01-15",
  duration: 90,
  status: "Draft",
  courseName: "Láº­p trÃ¬nh cÆ¡ báº£n",
  students: [
    {
      id: 1,
      studentCode: "B21DCCN001",
      fullName: "Nguyá»…n VÄƒn A",
      email: "email@example.com",
      className: "K66A"
    }
  ],
  supervisors: [
    {
      id: 1,
      lecturerCode: "GV001",
      fullName: "Pháº¡m VÄƒn C",
      email: "email@example.com",
      role: "Supervisor"
    }
  ]
}
```

## 5. Cáº¥u trÃºc File

```
view-schedule/
â”œâ”€â”€ ViewSchedule.jsx              # Trang xem lá»‹ch gá»‘c (báº£ng/lá»‹ch)
â”œâ”€â”€ ViewExamTimetable.jsx         # Trang xem lá»‹ch theo thá»i gian biá»ƒu
â””â”€â”€ components/
    â”œâ”€â”€ ExamCalendar.jsx          # Component lá»‹ch FullCalendar
    â”œâ”€â”€ ExamListView.jsx          # Component danh sÃ¡ch báº£ng
    â”œâ”€â”€ ExamFormModal.jsx         # Modal thÃªm/sá»­a ká»³ thi
    â””â”€â”€ ExamDetailModal.jsx       # Modal chi tiáº¿t (Cáº¬P NHáº¬T Má»šI)
```

## 6. Components Má»›i

### ViewExamTimetable
- Hiá»ƒn thá»‹ lá»‹ch thi theo format tá»« API `/exams/timetable/view`
- NhÃ³m theo ngÃ y vÃ  buá»•i (sÃ¡ng/chiá»u)
- CÃ³ bá»™ lá»c theo thá»i gian vÃ  Ä‘á»£t thi

### ExamDetailModal (ÄÃ£ cáº­p nháº­t)
- Há»— trá»£ cáº£ 2 mode:
  1. **Mode cÅ©**: Nháº­n prop `exam` (object)
  2. **Mode má»›i**: Nháº­n prop `examId` vÃ  `accessToken`, tá»± Ä‘á»™ng fetch detail
- Hiá»ƒn thá»‹ 2 tabs:
  - Tab Sinh viÃªn: Danh sÃ¡ch Ä‘áº§y Ä‘á»§ sinh viÃªn
  - Tab GiÃ¡m thá»‹: Danh sÃ¡ch giÃ¡m thá»‹ vá»›i vai trÃ²
- CÃ³ nÃºt xuáº¥t danh sÃ¡ch (chÆ°a implement)

### ExamCard (Component con)
- Hiá»ƒn thá»‹ thÃ´ng tin má»™t ká»³ thi trong timetable
- CÃ³ nÃºt "Chi tiáº¿t" Ä‘á»ƒ xem thÃªm

## 7. UI Components Má»›i

### Tabs (`components/ui/tabs.jsx`)
```jsx
import { Tabs, TabsList, TabsTrigger, TabsContent } from "~/components/ui/tabs";

<Tabs defaultValue="students">
  <TabsList>
    <TabsTrigger value="students">Sinh viÃªn</TabsTrigger>
    <TabsTrigger value="supervisors">GiÃ¡m thá»‹</TabsTrigger>
  </TabsList>
  <TabsContent value="students">...</TabsContent>
  <TabsContent value="supervisors">...</TabsContent>
</Tabs>
```

### Table (ÄÃ£ cÃ³ sáºµn)
```jsx
import { Table, TableHeader, TableBody, TableRow, TableHead, TableCell } from "~/components/ui/table";
```

## 8. Dependencies

Cáº§n cÃ i Ä‘áº·t package má»›i (náº¿u chÆ°a cÃ³):
```bash
npm install @radix-ui/react-tabs
```

## 9. ThÃªm vÃ o Navigation

Cáº­p nháº­t file navigation Ä‘á»ƒ thÃªm menu má»›i:

```javascript
// constants/navAdmin.jsx
{
  name: "Lá»‹ch thi chi tiáº¿t",
  path: "/admin/exam-timetable",
  icon: CalendarDays,
}
```

## 10. TÃ­nh nÄƒng sáº¯p tá»›i

- [ ] Xuáº¥t danh sÃ¡ch sinh viÃªn ra Excel/PDF
- [ ] Xuáº¥t danh sÃ¡ch giÃ¡m thá»‹ ra Excel/PDF
- [ ] In lá»‹ch thi
- [ ] Gá»­i email thÃ´ng bÃ¡o cho sinh viÃªn
- [ ] Gá»­i email thÃ´ng bÃ¡o cho giÃ¡m thá»‹
- [ ] Filter nÃ¢ng cao (theo phÃ²ng, theo giáº£ng viÃªn...)
- [ ] Xem lá»‹ch thi cá»§a má»™t sinh viÃªn cá»¥ thá»ƒ
- [ ] Xem lá»‹ch coi thi cá»§a má»™t giáº£ng viÃªn cá»¥ thá»ƒ

## 11. LÆ°u Ã½

1. **Authentication**: Cáº§n Ä‘Äƒng nháº­p vÃ  cÃ³ quyá»n admin
2. **Loading State**: Hiá»ƒn thá»‹ spinner khi Ä‘ang táº£i dá»¯ liá»‡u
3. **Error Handling**: Hiá»ƒn thá»‹ toast message khi cÃ³ lá»—i
4. **Empty State**: Hiá»ƒn thá»‹ thÃ´ng bÃ¡o khi khÃ´ng cÃ³ dá»¯ liá»‡u
5. **Responsive**: Giao diá»‡n tÆ°Æ¡ng thÃ­ch vá»›i mobile/tablet

## 12. Troubleshooting

### Lá»—i: "Cannot read property 'students' of undefined"
**NguyÃªn nhÃ¢n**: API chÆ°a tráº£ vá» data  
**Giáº£i phÃ¡p**: Kiá»ƒm tra backend Ä‘Ã£ cháº¡y vÃ  API endpoint Ä‘Ãºng

### Lá»—i: "@radix-ui/react-tabs not found"
**NguyÃªn nhÃ¢n**: Package chÆ°a Ä‘Æ°á»£c cÃ i  
**Giáº£i phÃ¡p**: 
```bash
npm install @radix-ui/react-tabs
```

### KhÃ´ng hiá»ƒn thá»‹ danh sÃ¡ch sinh viÃªn/giÃ¡m thá»‹
**NguyÃªn nhÃ¢n**: Ká»³ thi chÆ°a cÃ³ sinh viÃªn/giÃ¡m thá»‹ Ä‘Æ°á»£c phÃ¢n cÃ´ng  
**Giáº£i phÃ¡p**: Äáº£m báº£o Ä‘Ã£ cháº¡y thuáº­t toÃ¡n xáº¿p lá»‹ch vÃ  táº¡o registrations/supervisors

---

**TÃ¡c giáº£**: AI Assistant  
**NgÃ y táº¡o**: 2025-01-15  
**Version**: 1.0.0
